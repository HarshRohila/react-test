(this["webpackJsonpreact-test"]=this["webpackJsonpreact-test"]||[]).push([[0],{223:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(83),s=n.n(r),i=(n(94),n(95),n(96),n(5)),j=n(4),u=n(1),o=function(e){Object(j.a)(e);var t=Object(c.useState)(),n=Object(i.a)(t,2);n[0],n[1];return Object(c.useEffect)((function(){}),[]),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(u.jsx)("div",{className:"container-fluid",children:Object(u.jsx)("a",{className:"navbar-brand",href:"#",children:"Fullstack Test"})})})})},b=n(7),l=n.n(b),d=n(13),O=n(8),h=function(e){var t=e.course,n=Object(c.useState)(),a=Object(i.a)(n,2);a[0],a[1];return Object(c.useEffect)((function(){}),[]),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"card",style:{width:"18rem"},children:[Object(u.jsx)("img",{className:"card-img-top",src:t.thumbnailURL,alt:t.title}),Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsx)("h5",{className:"card-title",children:t.title}),Object(u.jsx)("p",{className:"card-text",children:t.price}),Object(u.jsx)("nav",{children:Object(u.jsx)(O.a,{className:"btn btn-primary",to:"/payment",children:"Buy"})})]})]})})},p=n(33),m=n(34),x=function(e){return Object(j.a)(e),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(p.a,{icon:m.a,spin:!0})})},f=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(c.useState)("idle"),a=Object(i.a)(n,2),r=a[0],s=a[1],j=Object(c.useState)(null),u=Object(i.a)(j,2),o=u[0],b=u[1],l=Object(c.useState)(null),d=Object(i.a)(l,2),O=d[0],h=d[1],p=Object(c.useCallback)((function(){return s("pending"),b(null),h(null),e.apply(void 0,arguments).then((function(e){b(e),s("success")})).catch((function(e){h(e),s("error")}))}),[e]);return Object(c.useEffect)((function(){t&&p()}),[p,t]),{execute:p,status:r,value:o,error:O}},v=function(e){Object(j.a)(e);var t=f(g),n=t.status,c=t.value;return Object(u.jsxs)(u.Fragment,{children:["pending"===n&&Object(u.jsx)(x,{}),"success"===n&&Object(u.jsx)(y,{courses:c})]})};function g(){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://s3-ap-southeast-1.amazonaws.com/he-public-data/courses26269ff.json").then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=function(e){var t=e.courses;return Object(u.jsx)(u.Fragment,{children:t.map((function(e){return Object(u.jsx)(h,{course:e},e.id)}))})},F=n(26),N=n(40),S=N.a().shape({email:N.b().email("Invalid email").required("Required"),password:N.b().min(8,"Too Short!").max(50,"Too Long!").required("Required")}),C=n(20),L=n(39),k=0;var R=function(e){var t=e.field,n=e.label,a=Object(L.a)(e,["field","label"]),r=Object(c.useState)(function(){return k++,"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id").concat(k)}()),s=Object(i.a)(r,1)[0];return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"mb-3",children:[n&&Object(u.jsx)("label",{htmlFor:s,className:"form-label",children:n}),Object(u.jsx)("input",Object(C.a)(Object(C.a)({className:"form-control",id:s},t),a))]})})},E=function(e){var t=e.children,n=Object(L.a)(e,["children"]);return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("button",Object(C.a)(Object(C.a)({className:"btn btn-primary"},n),{},{children:t}))})},T={email:"",password:""},q=function(e){var t=e.onSubmit,n=e.isSubmitLoading;return Object(u.jsx)("div",{className:"card",children:Object(u.jsx)("div",{className:"card-body",children:Object(u.jsx)(F.c,{initialValues:T,validationSchema:S,onSubmit:t,children:function(e){var t=e.errors,c=e.touched;return Object(u.jsxs)(F.b,{children:[Object(u.jsx)(F.a,{component:R,type:"email",name:"email",label:"Email"}),t.email&&c.email?Object(u.jsx)("div",{children:t.email}):null,Object(u.jsx)(F.a,{component:R,type:"password",name:"password",label:"Password"}),t.password&&c.password?Object(u.jsx)("div",{children:t.password}):null,Object(u.jsxs)(E,{type:"submit",children:["Submit",n&&Object(u.jsx)(p.a,{icon:m.a,spin:!0})]})]})}})})})},B=n(38),I=n.n(B),P="http://localhost:4000/api";function U(e){return A.apply(this,arguments)}function A(){return(A=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I.a.post("".concat(P,"/users"),t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=function(e){Object(j.a)(e);var t=f(U,!1).execute;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Register"}),Object(u.jsx)(q,{onSubmit:function(e){t(e)}})]})},J=function(e){return Object(j.a)(e),Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"container-fluid",children:[Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col",children:[Object(u.jsx)(D,{}),Object(u.jsx)("nav",{children:Object(u.jsx)(O.a,{to:"login",children:"Already registered? Log in"})})]})}),Object(u.jsx)("nav",{children:Object(u.jsx)(O.a,{to:"dashboard",children:"Dashboard"})})]})})},z=I.a.create({baseURL:P,withCredentials:!0}),M=function(e){Object(j.a)(e);var t=f(V,!1),n=t.execute,c=t.status,a=Object(O.c)();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Login"}),Object(u.jsx)(q,{onSubmit:function(e){n(e).then((function(){a("dashboard")})).catch((function(e){alert("Login Failed"),console.error(e)}))},isSubmitLoading:"pending"===c}),Object(u.jsx)("nav",{children:Object(u.jsx)(O.a,{to:"/",children:"New User? Register"})})]})};function V(e){return G.apply(this,arguments)}function G(){return(G=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z.post("/auth/login",t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H=function(e){return Object(j.a)(e),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:"container-fluid",children:Object(u.jsx)("div",{className:"row",children:Object(u.jsx)(M,{})})})})},K=function(e){Object(j.a)(e);var t=Object(c.useState)(),n=Object(i.a)(t,2);n[0],n[1];return Object(c.useEffect)((function(){}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"React TS FC Component"}),Object(u.jsx)("div",{children:"List"})]})},Q=function(e){return Object(j.a)(e),Object(u.jsxs)(O.b,{children:[Object(u.jsx)(W,{path:"/",pageComponent:Object(u.jsx)(J,{})}),Object(u.jsx)(X,{path:"dashboard",pageComponent:Object(u.jsx)(v,{})}),Object(u.jsx)(X,{path:"payment",pageComponent:Object(u.jsx)(K,{})}),Object(u.jsx)(W,{path:"login",pageComponent:Object(u.jsx)(H,{})})]})},W=function(e){return e.pageComponent},X=function(e){var t=f(Y).status,n=Object(O.c)();return Object(u.jsxs)(u.Fragment,{children:["pending"===t&&Object(u.jsx)(x,{}),"success"===t&&e.pageComponent,"error"===t&&n("/login")&&Object(u.jsx)(u.Fragment,{})]})};function Y(){return Z.apply(this,arguments)}function Z(){return(Z=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z.get("/users/me"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=function(){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(o,{}),Object(u.jsx)(Q,{})]})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,224)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)($,{})}),document.getElementById("root")),_()},95:function(e,t,n){},96:function(e,t,n){}},[[223,1,2]]]);
//# sourceMappingURL=main.16dfe6fb.chunk.js.map